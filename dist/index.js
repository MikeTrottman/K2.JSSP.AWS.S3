metadata={systemName:"AWS-S3",displayName:"AWS S3",description:"Connect to your Amazon Web Services S3 Bucket.",configuration:{AWSRegion:{displayName:"AWS Region",type:"string",value:"ex: us-west-2",required:!0},AWSBucketName:{displayName:"AWS Bucket Name",type:"string",value:"s3-bucket-name",required:!0},AWSAccessKey:{displayName:"AWS IAM User Access Key",type:"string",value:"IAM User Access Key",required:!0},AWSSecretKey:{displayName:"AWS IAM User Secret Key",type:"string",value:"IAM User Secret Key",required:!0}}},ondescribe=async function({configuration:e}){postSchema({objects:{AWSS3Bucket:{displayName:"AWS S3 Bucket",description:"Get S3 Bucket Content List of Objects",properties:{Key:{displayName:"Key",type:"string"},LastModified:{displayName:"Last Modified",type:"dateTime"},ETag:{displayName:"Etag",type:"string"},Size:{displayName:"Size",type:"number"},StorageClass:{displayName:"Storage Class",type:"number"}},methods:{GetBucketContents:{displayName:"Get Bucket Contents",type:"list",parameters:{prefix:{displayName:"Prefix",description:"Directory Path",type:"string"},"max-keys":{displayName:"Max Keys",description:"Number of Records to List. The Take.",type:"number"},"start-after":{displayName:"Start After",description:"Key to Start After for Pagination. The Skip.",type:"string"}},inputs:["prefix","max-keys","start-after"],outputs:["key","lastModified","eTag","size","storageClass"]}}}}})},onexecute=async function({objectName:e,methodName:t,parameters:s,properties:a,configuration:r}){return new Promise((e,t)=>{var a="https://"+r.AWSBucketName+".s3."+r.AWSRegion+".amazonaws.com?list-type=2&max-keys=",i=new XMLHttpRequest;i.onreadystatechange=function(){try{if(4!==i.readyState){var r=JSON.parse(i.responseText);throw new Error("Ready State Fail - Failed with status "+i.status+" | "+r.code+": "+r.message+" | URL: "+a)}if(200!==i.status)throw r=JSON.parse(i.responseText),new Error("Failed with status "+i.status+" | "+r.code+": "+r.message+" | URL: "+a);r=JSON.parse(i.responseText),postResult(r.map(e=>({"max-keys":s["max-keys"],prefix:s.prefix,"start-after":s["start-after"]}))),e()}catch(e){t(e)}},i.open("GET",a),i.send()})};
//# sourceMappingURL=index.js.map
