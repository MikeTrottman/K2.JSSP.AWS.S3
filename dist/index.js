metadata={systemName:"AWS-S3-Bucket",displayName:"AWS S3 Bucket",description:"Connect to your Amazon Web Services S3 Bucket.",configuration:{AWSRegion:{displayName:"AWS Region",type:"string",value:"us-west-2",required:!0},AWSBucketName:{displayName:"AWS Bucket Name",type:"string",value:"s3-bucket-name",required:!0},AWSAccessKey:{displayName:"AWS IAM User Access Key",type:"string",value:"IAM User Access Key",required:!0},AWSSecretKey:{displayName:"AWS IAM User Secret Key",type:"string",value:"IAM User Secret Key",required:!0}}},ondescribe=async function({configuration:e}){postSchema({objects:{AWSS3Bucket:{displayName:"AWS S3 Bucket",description:"Get S3 Bucket Content List of Objects",properties:{Key:{displayName:"Key",type:"string"},LastModified:{displayName:"Last Modified",type:"dateTime"},ETag:{displayName:"Etag",type:"string"},Size:{displayName:"Size",type:"number"},StorageClass:{displayName:"Storage Class",type:"number"}},methods:{GetBucketContents:{displayName:"Get Bucket Contents",type:"list",parameters:{prefix:{displayName:"Prefix",description:"Directory Path",type:"string"},"max-keys":{displayName:"Max Keys",description:"Number of Records to List. The Take.",type:"number"},"start-after":{displayName:"Start After",description:"Key to Start After for Pagination. The Skip.",type:"string"}},inputs:["prefix","max-keys","start-after"],outputs:["Key","LastModified","ETag","Size","StorageClass"]}}},AWSS3File:{displayName:"AWS S3 File",description:"Add or Delete AWS S3 Files",properties:{Key:{displayName:"Key",type:"string"}},methods:{CreateFile:{displayName:"Persist a file to S3",type:"execute",parameters:{Key:{displayName:"Key",description:"File Path, Name and Extension (Ex: ParentDirectory/Directory/DocumentName.ext)",type:"string"}},inputs:["Key","File"],requiredInputs:["Key","File"],outputs:["Key"]},DeleteFile:{displayName:"Remove a file from S3",type:"delete",parameters:{Key:{displayName:"Key",description:"File Path, Name and Extension (Ex: ParentDirectory/Directory/DocumentName.ext)",type:"string"}},inputs:["Key"],requiredInputs:["Key"],outputs:["Key"]}}}}})},onexecute=async function({objectName:e,methodName:t,parameters:a,properties:s,configuration:i,schema:r}){switch(e){case"AWSS3Bucket":await async function(e,t,a,s){switch(e){case"GetBucketContents":await function(e,t,a){return new Promise((t,a)=>{var s="https://"+metadata.configuration.AWSBucketName+".s3."+metadata.configuration.AWSRegion+".amazonaws.com?list-type=2&max-keys=",i=new XMLHttpRequest;i.onreadystatechange=function(){try{if(4!==i.readyState)return;if(200!==i.status)throw new Error("Failed with status "+i.status);var s=JSON.parse(i.responseText);postResult(s.map(t=>({"max-keys":e["max-keys"],prefix:e.prefix,"start-after":e["start-after"]}))),t()}catch(e){a(e)}},i.open("GET",s),i.send()})}(a);break;default:throw new Error("The method "+e+" is not supported.")}}(t,0,a);break;default:throw new Error("The object "+e+" is not supported.")}};
//# sourceMappingURL=index.js.map
