metadata={systemName:"AWS-S3",displayName:"AWS S3",description:"Connect to your Amazon Web Services S3 Bucket.",configuration:{AWSRegion:{displayName:"AWS Region",type:"string",value:"ex: us-west-2",required:!0},AWSBucketName:{displayName:"AWS Bucket Name",type:"string",value:"s3-bucket-name",required:!0},AWSAccessKey:{displayName:"AWS IAM User Access Key",type:"string",value:"IAM User Access Key",required:!0},AWSSecretKey:{displayName:"AWS IAM User Secret Key",type:"string",value:"IAM User Secret Key",required:!0}}},ondescribe=async function({configuration:e}){postSchema({objects:{AWSS3Bucket:{displayName:"AWS S3 Bucket",description:"Get S3 Bucket Content List of Objects",properties:{Key:{displayName:"Key",type:"string"},LastModified:{displayName:"Last Modified",type:"dateTime"},ETag:{displayName:"Etag",type:"string"},Size:{displayName:"Size",type:"number"},StorageClass:{displayName:"Storage Class",type:"number"}},methods:{GetBucketContents:{displayName:"Get Bucket Contents",type:"list",parameters:{prefix:{displayName:"Prefix",description:"Directory Path",type:"string"},"max-keys":{displayName:"Max Keys",description:"Number of Records to List. The Take.",type:"number"},"start-after":{displayName:"Start After",description:"Key to Start After for Pagination. The Skip.",type:"string"}},inputs:["prefix","max-keys","start-after"],outputs:["key","lastModified","eTag","size","storageClass"]}}}}})},onexecute=async function({objectName:e,methodName:t,parameters:a,properties:s,configuration:r}){switch(e){case"AWSS3Bucket":await async function(e,t,a,s){switch(e){case"GetBucketContents":await function(e,t,a){return new Promise((t,a)=>{var s="https://"+metadata.configuration.AWSBucketName+".s3."+metadata.configuration.AWSRegion+".amazonaws.com?list-type=2&max-keys=",r=new XMLHttpRequest;r.onreadystatechange=function(){try{if(4!==r.readyState){var i=JSON.parse(r.responseText);throw new Error("Ready State Fail - Failed with status "+r.status+" | "+i.code+": "+i.message+" | URL: "+s)}if(200!==r.status)throw i=JSON.parse(r.responseText),new Error("Failed with status "+r.status+" | "+i.code+": "+i.message+" | URL: "+s);i=JSON.parse(r.responseText),postResult(i.map(t=>({"max-keys":e["max-keys"],prefix:e.prefix,"start-after":e["start-after"]}))),t()}catch(e){a(e)}},r.open("GET",s),r.send()})}(a);break;default:throw new Error("The method "+e+" is not supported.")}}(t,0,a);break;default:throw new Error("The object "+e+" is not supported.")}};
//# sourceMappingURL=index.js.map
