metadata={systemName:"com.k2.s3sample",displayName:"Example AWS S3 Broker",description:"An example broker that accesses AWS S3 Storage."},ondescribe=async function(){postSchema({objects:{File:{displayName:"File",description:"Manages Files on AWS S3",properties:{fileName:{displayName:"File Name",type:"string"},size:{displayName:"File Size",type:"string"},contentType:{displayName:"Content Type",type:"string"},content:{displayName:"File Content",type:"attachment"}},methods:{Get:{displayName:"Get File",type:"read",inputs:["fileName"],requiredInputs:["fileName"],outputs:["fileName","size","contentType","content"]}}}}})},onexecute=async function(e,t,n,s){switch(e){case"File":await async function(e,t,n){switch(e){case"Get":await function(e,t){return new Promise((e,n)=>{console.log("===htk in onexecuteGetFile");var s=new XMLHttpRequest;s.onreadystatechange=function(){try{if(4!==s.readyState)return;if(200!==s.status)throw new Error("Failed with status "+s.status);console.log("=== hdr "+s.getResponseHeader("Content-Type")),console.log("=== len "+s.getResponseHeader("Content-Length")),console.log("===  file "+s.response),postResult({fileName:t.fileName,size:s.getResponseHeader("Content-Length"),contentType:s.getResponseHeader("Content-Type"),content:s.response}),e()}catch(e){n(e)}},console.log("=== fn "+t.fileName),s.open("GET","https://rag0scnz17.execute-api.us-east-1.amazonaws.com/test/files/"+t.fileName),s.responseType="blob",s.send()})}(0,t);break;default:throw new Error("The method "+e+" is not supported.")}}(t,s);break;default:throw new Error("The object "+e+" is not supported.")}};
//# sourceMappingURL=index.js.map
