metadata={systemName:"AWS-S3-Bucket",displayName:"AWS S3 Bucket",description:"Connect to your Amazon Web Services S3 Bucket.",configuration:{AWSRegion:{displayName:"AWS Region",type:"string",value:"us-west-2",required:!0},AWSBucketName:{displayName:"AWS Bucket Name",type:"string",value:"s3-bucket-name",required:!0},AWSAccessKey:{displayName:"AWS IAM User Access Key",type:"string",value:"IAM User Access Key",required:!0},AWSSecretKey:{displayName:"AWS IAM User Secret Key",type:"string",value:"IAM User Secret Key",required:!0}}},ondescribe=async function({configuration:e}){postSchema({objects:{bucket:{displayName:"Bucket",description:"Get S3 Bucket Contents",properties:{key:{displayName:"Key",type:"string"},lastModified:{displayName:"Last Modified",type:"dateTime"},eTag:{displayName:"Etag",type:"string"},size:{displayName:"Size",type:"number"},storageClass:{displayName:"Storage Class",type:"number"}},methods:{getList:{displayName:"Get List of Bucket Contents",type:"list",inputs:["prefix","max-keys","start-after"],outputs:["key","lastModified","eTag","size","storageClass"]}}}}})},onexecute=async function({objectName:e,methodName:t,parameters:r,properties:s,configuration:a}){switch(e){case"posts":await async function(e,t,r,s){switch(e){case"getList":await(console.log("urlValue | AWSBucketName: "+metadata.configuration.AWSBucketName+"AWSRegion: "+metadata.configuration.AWSBucketName),new Promise((e,t)=>{try{var r="https://"+metadata.configuration.AWSBucketName+".s3."+metadata.configuration.AWSRegion+".amazonaws.com?list-type=2"}catch(e){throw new Error("Error on the urlValue | AWSBucketName: "+metadata.configuration.AWSBucketName+"AWSRegion: "+metadata.configuration.AWSBucketName)}var s=new XMLHttpRequest;s.onreadystatechange=function(){try{if(4!==s.readyState)return;if(200!==s.status)throw new Error("Failed with status "+s.status);var r=JSON.parse(s.responseText);postResult(r.map(e=>({key:e.key,lastModified:e.lastModified,etag:e.etag,size:e.size,storageClass:e.storageClass}))),e()}catch(e){t(e)}},s.open("GET",r),s.send()}));break;case"getById":await function(e,t,r){return new Promise((e,s)=>{var a=r.ServiceURL+"posts/",o=new XMLHttpRequest;if(o.onreadystatechange=function(){try{if(4!==o.readyState)return;if(200!==o.status)throw new Error("Failed with status "+o.status);var t=JSON.parse(o.responseText);postResult({id:t.id,userId:t.userId,title:t.title,body:t.body}),e()}catch(e){s(e)}},"number"!=typeof t.id)throw new Error('properties["id"] is not of type number');o.open("GET",a+encodeURIComponent(t.id)),o.send()})}(0,r,s);break;case"getByUserId":await function(e,t,r){return new Promise((e,s)=>{var a=r.ServiceURL+"posts?userId=",o=new XMLHttpRequest;if(o.onreadystatechange=function(){try{if(4!==o.readyState)return;if(200!==o.status)throw new Error("Failed with status "+o.status);var t=JSON.parse(o.responseText);postResult(t.map(e=>({id:e.id,userId:e.userId,title:e.title,body:e.body}))),e()}catch(e){s(e)}},"number"!=typeof t.userId)throw new Error('properties["userId"] is not of type number');o.open("GET",a+encodeURIComponent(t.userId)),o.send()})}(0,r,s);break;case"create":await function(e,t,r){return new Promise((e,s)=>{var a=r.ServiceURL+"posts/",o=JSON.stringify({userId:t.userId,title:t.title,body:t.body}),i=new XMLHttpRequest;i.onreadystatechange=function(){try{if(4!==i.readyState)return;if(201!==i.status)throw new Error("Failed with status "+i.status);var t=JSON.parse(i.responseText);postResult({id:t.id,userId:t.userId,title:t.title,body:t.body}),e()}catch(e){s(e)}},i.open("POST",a),i.setRequestHeader("Content-Type","application/json"),i.send(o)})}(0,r,s);break;case"update":await function(e,t,r){return new Promise((e,s)=>{var a=r.ServiceURL+"posts/",o=JSON.stringify({userId:t.userId,title:t.title,body:t.body}),i=new XMLHttpRequest;if(i.onreadystatechange=function(){try{if(4!==i.readyState)return;if(200!==i.status)throw new Error("Failed with status "+i.status);var t=JSON.parse(i.responseText);postResult({id:t.id,userId:t.userId,title:t.title,body:t.body}),e()}catch(e){s(e)}},"number"!=typeof t.id)throw new Error('properties["id"] is not of type number');i.open("PUT",a+encodeURIComponent(t.id)),i.setRequestHeader("Content-Type","application/json"),i.send(o)})}(0,r,s);break;case"delete":await function(e,t,r){return new Promise((e,s)=>{var a=r.ServiceURL,o=new XMLHttpRequest;if(o.onreadystatechange=function(){try{if(4!==o.readyState)return;if(200!==o.status)throw new Error("Failed with status "+o.status);e()}catch(e){s(e)}},"number"!=typeof t.id)throw new Error('properties["id"] is not of type number');o.open("DELETE",a+"posts/"+encodeURIComponent(t.id)),o.setRequestHeader("Content-Type","application/json"),o.send()})}(0,r,s);break;default:throw new Error("The method "+e+" is not supported.")}}(t,0,s,a);break;default:throw new Error("The object "+e+" is not supported.")}};
//# sourceMappingURL=index.js.map
