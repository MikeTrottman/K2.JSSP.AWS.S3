"use strict";var e,r=(e=require("ava"))&&"object"==typeof e&&"default"in e?e.default:e;function t(e,r){global[e]=r}require("@k2oss/k2-broker-core/test-framework"),require("./index"),r("gets list of documents",async e=>{t("postResult",(function(e){})),t("XMLHttpRequest",s),await Promise.resolve(onexecute({objectName:"bucket",methodName:"getList",properties:{key:"",lastModified:"",eTag:"",size:"",storageClass:""},parameters:{},schema:{},configuration:{AWSRegion:"us-west-2",AWSBucketName:"k2-public-bucket",AWSAccessKey:"AKIATUIIRTY64EH3H5QA",AWSSecretKey:"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"}}))});class s{constructor(e){this.recorder={},this.recorder.headers={},console.log("Starting XHR Test")}open(e,r){this.recorder.opened={method:e,url:r}}setRequestHeader(e,r){this.recorder.headers[e]=r}async send(e){const r=require("request"),t={method:this.recorder.opened.method,url:this.recorder.opened.url,headers:this.recorder.headers,body:e};new Promise((e,s)=>{try{r(t,(r,t,s)=>{r?console.error("error inside request:"+r):(this.responseText=s,this.readyState=4,this.status=200,this.onreadystatechange(),e(),delete this.responseText)})}catch(e){console.log("error outside request"+e),s()}}).catch(e=>{console.log("Promise Error:"+e)})}}
//# sourceMappingURL=test.js.map
